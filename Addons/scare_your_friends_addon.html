<!-- Download Counter Widget (by MBT) -->
<div id="download-counter-widget">
  <p>Downloads: <span id="download-count">0</span></p>
  <button data-download-count="true" id="download-button">Download this Add-on</button>
</div>

<!-- Firebase and jQuery Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.firebase.com/v0/firebase.js"></script>

<!-- Download Counter Script -->
<script type="text/javascript">
  // Initialize the download counter
  $(document).ready(function () {
    var downloadButton = $('#download-button');
    var downloadCount = $('#download-count');
    var id = "unique-download-id"; // Replace with a unique ID for this widget
    var downloadStats = new Firebase("https://downloads-5bbcb-default-rtdb.firebaseio.com/downloads/id/" + id);
    var data = {};
    var isnew = false;

    // Fetch the current download count
    downloadStats.once('value', function (snapshot) {
      data = snapshot.val();
      if (data == null) {
        data = {
          value: 0,
          url: window.location.href,
          id: id
        };
        isnew = true;
      }
      downloadCount.text(data.value.toLocaleString());
    });

    // Increment the download count and open the download link in a new window
    downloadButton.click(function () {
      data.value++;
      downloadCount.text(data.value.toLocaleString());
      if (isnew) {
        downloadStats.set(data);
      } else {
        downloadStats.child('value').set(data.value);
      }

      // Open the download link in a new window
      window.open("https://raw.githubusercontent.com/Limecraft902/LimeTeamStudios-Content/refs/heads/content/Add-ons/SCARE%20Your%20Friends%20-%20LimeTeam%20Studios.mcaddon", "_blank");
    });
  });
</script>

<!-- Custom CSS for Styling -->
<style>
  #download-counter-widget {
    text-align: center;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh; /* Full viewport height to center vertically */
  }

  #download-counter-widget p {
    font-size: 18px; /* Base font size for "Downloads:" */
    margin: 0 0 20px 0; /* Add some space below the text */
  }

  #download-count {
    font-size: 24px; /* Larger font size for the number */
    font-weight: bold; /* Bold font for the number */
  }

  #download-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 20px 40px; /* Larger padding for a bigger button */
    font-size: 24px; /* Larger font size for the button text */
    cursor: pointer;
    border-radius: 10px; /* Rounded corners */
    transition: background-color 0.3s ease; /* Smooth hover effect */
  }

  #download-button:hover {
    background-color: #45a049; /* Darker green on hover */
  }
</style>
